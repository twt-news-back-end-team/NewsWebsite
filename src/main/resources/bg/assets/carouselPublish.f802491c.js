import{d as fe,u as de,h as pt,E as we,c as Re,l as We,a as ht,i as je,b as N,_ as Ne,r as _,o as f,e as B,f as Y,g as q,w as ce,j as k,k as E,n as L,F as re,m as S,p as ft,q as z,s as mt,t as pe,v as ae,x as R,y as Ee,z as Me,A as gt,N as vt,B as bt,C as yt,D as Ct,G as ne,H as kt,I as Ze,J as ie,K as Ge,L as K,M as ve,O as Je,P as wt,Q as Nt,R as It,S as Et,T as St,U as Vt,V as Tt,W as Dt,X as ge,Y as $t,Z as Pt,$ as Lt,a0 as He,a1 as _t,a2 as Mt,a3 as Ht,a4 as zt}from"./index.01ea1bf3.js";import{E as At,a as Ft}from"./el-button.2517079a.js";import{E as Bt,a as Ye,b as qt,c as Ot}from"./el-checkbox.70f31d31.js";import{E as Xe,i as Ut}from"./el-input.41fd1097.js";import{i as Kt,a as Rt,E as Qe,c as ze,b as he,d as Wt,C as jt,e as Zt,t as Gt,f as Jt}from"./el-scrollbar.ac6a23c0.js";import{S as Ae,i as Yt,u as xe,U as Ce,C as ke,s as Xt,a as Qt,b as xt,g as es,E as Z,c as ts,d as Fe,e as ss}from"./user.92dc6fd2.js";var Be=Ae?Ae.isConcatSpreadable:void 0;function ls(e){return Yt(e)||Kt(e)||!!(Be&&e&&e[Be])}function et(e,t,l,n,s){var u=-1,r=e.length;for(l||(l=ls),s||(s=[]);++u<r;){var c=e[u];t>0&&l(c)?t>1?et(c,t-1,l,n,s):Rt(s,c):n||(s[s.length]=c)}return s}var as=1/0;function ns(e){var t=e==null?0:e.length;return t?et(e,as):[]}const qe=e=>[...new Set(e)],Oe=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e];var os=fe({name:"NodeContent",setup(){return{ns:de("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:l}=this.$parent,{data:n,label:s}=t,{renderLabelFn:u}=l;return pt("span",{class:e.e("label")},u?u({node:t,data:n}):s)}});const Ve=Symbol(),is=fe({name:"ElCascaderNode",components:{ElCheckbox:Bt,ElRadio:Ye,NodeContent:os,ElIcon:we,Check:Re,Loading:We,ArrowRight:ht},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const l=je(Ve),n=de("cascader-node"),s=N(()=>l.isHoverMenu),u=N(()=>l.config.multiple),r=N(()=>l.config.checkStrictly),c=N(()=>{var y;return(y=l.checkedNodes[0])==null?void 0:y.uid}),p=N(()=>e.node.isDisabled),m=N(()=>e.node.isLeaf),v=N(()=>r.value&&!m.value||!p.value),V=N(()=>D(l.expandingNode)),b=N(()=>r.value&&l.checkedNodes.some(D)),D=y=>{var A;const{level:Q,uid:se}=e.node;return((A=y==null?void 0:y.pathNodes[Q-1])==null?void 0:A.uid)===se},M=()=>{V.value||l.expandNode(e.node)},$=y=>{const{node:A}=e;y!==A.checked&&l.handleCheckChange(A,y)},o=()=>{l.lazyLoad(e.node,()=>{m.value||M()})},H=y=>{!s.value||(O(),!m.value&&t("expand",y))},O=()=>{const{node:y}=e;!v.value||y.loading||(y.loaded?M():o())},U=()=>{s.value&&!m.value||(m.value&&!p.value&&!r.value&&!u.value?j(!0):O())},X=y=>{r.value?($(y),e.node.loaded&&M()):j(y)},j=y=>{e.node.loaded?($(y),!r.value&&M()):o()};return{panel:l,isHoverMenu:s,multiple:u,checkStrictly:r,checkedNodeId:c,isDisabled:p,isLeaf:m,expandable:v,inExpandingPath:V,inCheckedPath:b,ns:n,handleHoverExpand:H,handleExpand:O,handleClick:U,handleCheck:j,handleSelectCheck:X}}}),rs=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],ds=S("span",null,null,-1);function us(e,t,l,n,s,u){const r=_("el-checkbox"),c=_("el-radio"),p=_("check"),m=_("el-icon"),v=_("node-content"),V=_("loading"),b=_("arrow-right");return f(),B("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:L([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...D)=>e.handleHoverExpand&&e.handleHoverExpand(...D)),onFocus:t[3]||(t[3]=(...D)=>e.handleHoverExpand&&e.handleHoverExpand(...D)),onClick:t[4]||(t[4]=(...D)=>e.handleClick&&e.handleClick(...D))},[Y(" prefix "),e.multiple?(f(),q(r,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ce(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(f(),q(c,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ce(()=>{},["stop"]))},{default:k(()=>[Y(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ds]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(f(),q(m,{key:2,class:L(e.ns.e("prefix"))},{default:k(()=>[E(p)]),_:1},8,["class"])):Y("v-if",!0),Y(" content "),E(v),Y(" postfix "),e.isLeaf?Y("v-if",!0):(f(),B(re,{key:3},[e.node.loading?(f(),q(m,{key:0,class:L([e.ns.is("loading"),e.ns.e("postfix")])},{default:k(()=>[E(V)]),_:1},8,["class"])):(f(),q(m,{key:1,class:L(["arrow-right",e.ns.e("postfix")])},{default:k(()=>[E(b)]),_:1},8,["class"]))],64))],42,rs)}var cs=Ne(is,[["render",us],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const ps=fe({name:"ElCascaderMenu",components:{Loading:We,ElIcon:we,ElScrollbar:Qe,ElCascaderNode:cs},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=ft(),l=de("cascader-menu"),{t:n}=xe(),s=mt();let u=null,r=null;const c=je(Ve),p=z(null),m=N(()=>!e.nodes.length),v=N(()=>!c.initialLoaded),V=N(()=>`cascader-menu-${s}-${e.index}`),b=o=>{u=o.target},D=o=>{if(!(!c.isHoverMenu||!u||!p.value))if(u.contains(o.target)){M();const H=t.vnode.el,{left:O}=H.getBoundingClientRect(),{offsetWidth:U,offsetHeight:X}=H,j=o.clientX-O,y=u.offsetTop,A=y+u.offsetHeight;p.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${j} ${y} L${U} 0 V${y} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${j} ${A} L${U} ${X} V${A} Z" />
        `}else r||(r=window.setTimeout($,c.config.hoverThreshold))},M=()=>{!r||(clearTimeout(r),r=null)},$=()=>{!p.value||(p.value.innerHTML="",M())};return{ns:l,panel:c,hoverZone:p,isEmpty:m,isLoading:v,menuId:V,t:n,handleExpand:b,handleMouseMove:D,clearHoverZone:$}}});function hs(e,t,l,n,s,u){const r=_("el-cascader-node"),c=_("loading"),p=_("el-icon"),m=_("el-scrollbar");return f(),q(m,{key:e.menuId,tag:"ul",role:"menu",class:L(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:k(()=>{var v;return[(f(!0),B(re,null,pe(e.nodes,V=>(f(),q(r,{key:V.uid,node:V,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(f(),B("div",{key:0,class:L(e.ns.e("empty-text"))},[E(p,{size:"14",class:L(e.ns.is("loading"))},{default:k(()=>[E(c)]),_:1},8,["class"]),ae(" "+R(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(f(),B("div",{key:1,class:L(e.ns.e("empty-text"))},R(e.t("el.cascader.noData")),3)):(v=e.panel)!=null&&v.isHoverMenu?(f(),B("svg",{key:2,ref:"hoverZone",class:L(e.ns.e("hover-zone"))},null,2)):Y("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var fs=Ne(ps,[["render",hs],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let ms=0;const gs=e=>{const t=[e];let{parent:l}=e;for(;l;)t.unshift(l),l=l.parent;return t};class ue{constructor(t,l,n,s=!1){this.data=t,this.config=l,this.parent=n,this.root=s,this.uid=ms++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:u,label:r,children:c}=l,p=t[c],m=gs(this);this.level=s?0:n?n.level+1:1,this.value=t[u],this.label=t[r],this.pathNodes=m,this.pathValues=m.map(v=>v.value),this.pathLabels=m.map(v=>v.label),this.childrenData=p,this.children=(p||[]).map(v=>new ue(v,l,this)),this.loaded=!l.lazy||this.isLeaf||!Ee(p)}get isDisabled(){const{data:t,parent:l,config:n}=this,{disabled:s,checkStrictly:u}=n;return(Me(s)?s(t,this):!!t[s])||!u&&(l==null?void 0:l.isDisabled)}get isLeaf(){const{data:t,config:l,childrenData:n,loaded:s}=this,{lazy:u,leaf:r}=l,c=Me(r)?r(t,this):t[r];return gt(c)?u&&!s?!1:!(Array.isArray(n)&&n.length):!!c}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:l,children:n}=this,s=new ue(t,this.config,this);return Array.isArray(l)?l.push(t):this.childrenData=[t],n.push(s),s}calcText(t,l){const n=t?this.pathLabels.join(l):this.label;return this.text=n,n}broadcast(t,...l){const n=`onParent${ze(t)}`;this.children.forEach(s=>{s&&(s.broadcast(t,...l),s[n]&&s[n](...l))})}emit(t,...l){const{parent:n}=this,s=`onChild${ze(t)}`;n&&(n[s]&&n[s](...l),n.emit(t,...l))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,l=t.filter(s=>!s.isDisabled),n=l.length?l.every(s=>s.checked):!1;this.setCheckState(n)}setCheckState(t){const l=this.children.length,n=this.children.reduce((s,u)=>{const r=u.checked?1:u.indeterminate?.5:0;return s+r},0);this.checked=this.loaded&&this.children.filter(s=>!s.isDisabled).every(s=>s.loaded&&s.checked)&&t,this.indeterminate=this.loaded&&n!==l&&n>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:l,multiple:n}=this.config;l||!n?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Se=(e,t)=>e.reduce((l,n)=>(n.isLeaf?l.push(n):(!t&&l.push(n),l=l.concat(Se(n.children,t))),l),[]);class Ue{constructor(t,l){this.config=l;const n=(t||[]).map(s=>new ue(s,this.config));this.nodes=n,this.allNodes=Se(n,!1),this.leafNodes=Se(n,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,l){const n=l?l.appendChild(t):new ue(t,this.config);l||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(t,l){t.forEach(n=>this.appendNode(n,l))}getNodeByValue(t,l=!1){return!t&&t!==0?null:this.getFlattedNodes(l).find(s=>he(s.value,t)||he(s.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:n,level:s})=>he(t.value,n)&&t.level===s)||null}}const tt={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},vs={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:vt,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},bs=e=>N(()=>({...vs,...e.props})),Ke=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},ys=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():bt(e)&&e.click()},Cs=(e,t)=>{const l=t.slice(0),n=l.map(u=>u.uid),s=e.reduce((u,r)=>{const c=n.indexOf(r.uid);return c>-1&&(u.push(r),l.splice(c,1),n.splice(c,1)),u},[]);return s.push(...l),s},ks=fe({name:"ElCascaderPanel",components:{ElCascaderMenu:fs},props:{...tt,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ce,ke,"close","expand-change"],setup(e,{emit:t,slots:l}){let n=!1;const s=de("cascader"),u=bs(e);let r=null;const c=z(!0),p=z([]),m=z(null),v=z([]),V=z(null),b=z([]),D=N(()=>u.value.expandTrigger==="hover"),M=N(()=>e.renderLabel||l.default),$=()=>{const{options:d}=e,h=u.value;n=!1,r=new Ue(d,h),v.value=[r.getNodes()],h.lazy&&Ee(e.options)?(c.value=!1,o(void 0,g=>{g&&(r=new Ue(g,h),v.value=[r.getNodes()]),c.value=!0,Q(!1,!0)})):Q(!1,!0)},o=(d,h)=>{const g=u.value;d=d||new ue({},g,void 0,!0),d.loading=!0;const I=w=>{const T=d,G=T.root?null:T;w&&(r==null||r.appendNodes(w,G)),T.loading=!1,T.loaded=!0,T.childrenData=T.childrenData||[],h&&h(w)};g.lazyLoad(d,I)},H=(d,h)=>{var g;const{level:I}=d,w=v.value.slice(0,I);let T;d.isLeaf?T=d.pathNodes[I-2]:(T=d,w.push(d.children)),((g=V.value)==null?void 0:g.uid)!==(T==null?void 0:T.uid)&&(V.value=d,v.value=w,!h&&t("expand-change",(d==null?void 0:d.pathValues)||[]))},O=(d,h,g=!0)=>{const{checkStrictly:I,multiple:w}=u.value,T=b.value[0];n=!0,!w&&(T==null||T.doCheck(!1)),d.doCheck(h),A(),g&&!w&&!I&&t("close"),!g&&!w&&!I&&U(d)},U=d=>{!d||(d=d.parent,U(d),d&&H(d))},X=d=>r==null?void 0:r.getFlattedNodes(d),j=d=>{var h;return(h=X(d))==null?void 0:h.filter(g=>g.checked!==!1)},y=()=>{b.value.forEach(d=>d.doCheck(!1)),A()},A=()=>{var d;const{checkStrictly:h,multiple:g}=u.value,I=b.value,w=j(!h),T=Cs(I,w),G=T.map(P=>P.valueByOption);b.value=T,m.value=g?G:(d=G[0])!=null?d:null},Q=(d=!1,h=!1)=>{const{modelValue:g}=e,{lazy:I,multiple:w,checkStrictly:T}=u.value,G=!T;if(!(!c.value||n||!h&&he(g,m.value)))if(I&&!d){const x=qe(ns(Oe(g))).map(W=>r==null?void 0:r.getNodeByValue(W)).filter(W=>!!W&&!W.loaded&&!W.loading);x.length?x.forEach(W=>{o(W,()=>Q(!1,h))}):Q(!0,h)}else{const P=w?Oe(g):[g],x=qe(P.map(W=>r==null?void 0:r.getNodeByValue(W,G)));se(x,h),m.value=g}},se=(d,h=!0)=>{const{checkStrictly:g}=u.value,I=b.value,w=d.filter(P=>!!P&&(g||P.isLeaf)),T=r==null?void 0:r.getSameNode(V.value),G=h&&T||w[0];G?G.pathNodes.forEach(P=>H(P,!0)):V.value=null,I.forEach(P=>P.doCheck(!1)),w.forEach(P=>P.doCheck(!0)),b.value=w,ie(me)},me=()=>{!Ge||p.value.forEach(d=>{const h=d==null?void 0:d.$el;if(h){const g=h.querySelector(`.${s.namespace.value}-scrollbar__wrap`),I=h.querySelector(`.${s.b("node")}.${s.is("active")}`)||h.querySelector(`.${s.b("node")}.in-active-path`);Xt(g,I)}})},ee=d=>{const h=d.target,{code:g}=d;switch(g){case K.up:case K.down:{d.preventDefault();const I=g===K.up?-1:1;ve(Je(h,I,`.${s.b("node")}[tabindex="-1"]`));break}case K.left:{d.preventDefault();const I=p.value[Ke(h)-1],w=I==null?void 0:I.$el.querySelector(`.${s.b("node")}[aria-expanded="true"]`);ve(w);break}case K.right:{d.preventDefault();const I=p.value[Ke(h)+1],w=I==null?void 0:I.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`);ve(w);break}case K.enter:ys(h);break}};return yt(Ve,Ct({config:u,expandingNode:V,checkedNodes:b,isHoverMenu:D,initialLoaded:c,renderLabelFn:M,lazyLoad:o,expandNode:H,handleCheckChange:O})),ne([u,()=>e.options],$,{deep:!0,immediate:!0}),ne(()=>e.modelValue,()=>{n=!1,Q()}),ne(m,d=>{he(d,e.modelValue)||(t(Ce,d),t(ke,d))}),kt(()=>p.value=[]),Ze(()=>!Ee(e.modelValue)&&Q()),{ns:s,menuList:p,menus:v,checkedNodes:b,handleKeyDown:ee,handleCheckChange:O,getFlattedNodes:X,getCheckedNodes:j,clearCheckedNodes:y,calculateCheckedValue:A,scrollToExpandingNode:me}}});function ws(e,t,l,n,s,u){const r=_("el-cascader-menu");return f(),B("div",{class:L([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...c)=>e.handleKeyDown&&e.handleKeyDown(...c))},[(f(!0),B(re,null,pe(e.menus,(c,p)=>(f(),q(r,{key:p,ref_for:!0,ref:m=>e.menuList[p]=m,index:p,nodes:[...c]},null,8,["index","nodes"]))),128))],34)}var be=Ne(ks,[["render",ws],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);be.install=e=>{e.component(be.name,be)};const Ns=be,Is=40,Es={large:36,default:32,small:28},Ss={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:t,placement:l}=e;["right","left","bottom","top"].includes(l)||(t.arrow.x=35)},requires:["arrow"]}]},Vs="ElCascader",Ts=fe({name:Vs,components:{ElCascaderPanel:Ns,ElInput:Xe,ElTooltip:wt,ElScrollbar:Qe,ElTag:Wt,ElIcon:we,CircleClose:Nt,Check:Re,ArrowDown:It},directives:{Clickoutside:jt},props:{...tt,size:{type:String,validator:Zt},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},teleported:Et.teleported,tagType:{...Gt.type,default:"info"},validateEvent:{type:Boolean,default:!0}},emits:[Ce,ke,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:t}){let l=0,n=0;const s=de("cascader"),u=de("input"),{t:r}=xe(),{form:c,formItem:p}=Qt(),m=z(null),v=z(null),V=z(null),b=z(null),D=z(null),M=z(!1),$=z(!1),o=z(!1),H=z(""),O=z(""),U=z([]),X=z([]),j=z([]),y=z(!1),A=N(()=>e.disabled||(c==null?void 0:c.disabled)),Q=N(()=>e.placeholder||r("el.cascader.placeholder")),se=xt(),me=N(()=>["small"].includes(se.value)?"small":"default"),ee=N(()=>!!e.props.multiple),d=N(()=>!e.filterable||ee.value),h=N(()=>ee.value?O.value:H.value),g=N(()=>{var a;return((a=b.value)==null?void 0:a.checkedNodes)||[]}),I=N(()=>!e.clearable||A.value||o.value||!$.value?!1:!!g.value.length),w=N(()=>{const{showAllLevels:a,separator:i}=e,C=g.value;return C.length?ee.value?" ":C[0].calcText(a,i):""}),T=N({get(){return e.modelValue},set(a){t(Ce,a),t(ke,a),e.validateEvent&&(p==null||p.validate("change").catch(i=>St()))}}),G=N(()=>{var a,i;return(i=(a=m.value)==null?void 0:a.popperRef)==null?void 0:i.contentRef}),P=a=>{var i,C,F;A.value||(a=a!=null?a:!M.value,a!==M.value&&(M.value=a,(C=(i=v.value)==null?void 0:i.input)==null||C.setAttribute("aria-expanded",`${a}`),a?(x(),ie((F=b.value)==null?void 0:F.scrollToExpandingNode)):e.filterable&&Le(),t("visible-change",a)))},x=()=>{ie(()=>{var a;(a=m.value)==null||a.updatePopper()})},W=()=>{o.value=!1},Ie=a=>{const{showAllLevels:i,separator:C}=e;return{node:a,key:a.uid,text:a.calcText(i,C),hitState:!1,closable:!A.value&&!a.isDisabled,isCollapseTag:!1}},Te=a=>{var i;const C=a.node;C.doCheck(!1),(i=b.value)==null||i.calculateCheckedValue(),t("remove-tag",C.valueByOption)},st=()=>{if(!ee.value)return;const a=g.value,i=[],C=[];if(a.forEach(F=>C.push(Ie(F))),X.value=C,a.length){const[F,...le]=a,te=le.length;i.push(Ie(F)),te&&(e.collapseTags?i.push({key:-1,text:`+ ${te}`,closable:!1,isCollapseTag:!0}):le.forEach(J=>i.push(Ie(J))))}U.value=i},De=()=>{var a,i;const{filterMethod:C,showAllLevels:F,separator:le}=e,te=(i=(a=b.value)==null?void 0:a.getFlattedNodes(!e.props.checkStrictly))==null?void 0:i.filter(J=>J.isDisabled?!1:(J.calcText(F,le),C(J,h.value)));ee.value&&(U.value.forEach(J=>{J.hitState=!1}),X.value.forEach(J=>{J.hitState=!1})),o.value=!0,j.value=te,x()},$e=()=>{var a;let i;o.value&&D.value?i=D.value.$el.querySelector(`.${s.e("suggestion-item")}`):i=(a=b.value)==null?void 0:a.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`),i&&(i.focus(),!o.value&&i.click())},Pe=()=>{var a,i;const C=(a=v.value)==null?void 0:a.input,F=V.value,le=(i=D.value)==null?void 0:i.$el;if(!(!Ge||!C)){if(le){const te=le.querySelector(`.${s.e("suggestion-list")}`);te.style.minWidth=`${C.offsetWidth}px`}if(F){const{offsetHeight:te}=F,J=U.value.length>0?`${Math.max(te+6,l)}px`:`${l}px`;C.style.height=J,x()}}},lt=a=>{var i;return(i=b.value)==null?void 0:i.getCheckedNodes(a)},at=a=>{x(),t("expand-change",a)},nt=a=>{var i;const C=(i=a.target)==null?void 0:i.value;if(a.type==="compositionend")y.value=!1,ie(()=>_e(C));else{const F=C[C.length-1]||"";y.value=!Ut(F)}},ot=a=>{if(!y.value)switch(a.code){case K.enter:P();break;case K.down:P(!0),ie($e),a.preventDefault();break;case K.esc:M.value===!0&&(a.preventDefault(),a.stopPropagation(),P(!1));break;case K.tab:P(!1);break}},it=()=>{var a;(a=b.value)==null||a.clearCheckedNodes(),!M.value&&e.filterable&&Le(),P(!1)},Le=()=>{const{value:a}=w;H.value=a,O.value=a},rt=a=>{var i,C;const{checked:F}=a;ee.value?(i=b.value)==null||i.handleCheckChange(a,!F,!1):(!F&&((C=b.value)==null||C.handleCheckChange(a,!0,!1)),P(!1))},dt=a=>{const i=a.target,{code:C}=a;switch(C){case K.up:case K.down:{const F=C===K.up?-1:1;ve(Je(i,F,`.${s.e("suggestion-item")}[tabindex="-1"]`));break}case K.enter:i.click();break}},ut=()=>{const a=U.value,i=a[a.length-1];n=O.value?0:n+1,!(!i||!n||e.collapseTags&&a.length>1)&&(i.hitState?Te(i):i.hitState=!0)},ct=Jt(()=>{const{value:a}=h;if(!a)return;const i=e.beforeFilter(a);Vt(i)?i.then(De).catch(()=>{}):i!==!1?De():W()},e.debounce),_e=(a,i)=>{!M.value&&P(!0),!(i!=null&&i.isComposing)&&(a?ct():W())};return ne(o,x),ne([g,A],st),ne(U,()=>{ie(()=>Pe())}),ne(w,a=>H.value=a,{immediate:!0}),Ze(()=>{var a;const i=(a=v.value)==null?void 0:a.$el;l=(i==null?void 0:i.offsetHeight)||Es[se.value]||Is,Tt(i,Pe)}),{popperOptions:Ss,tooltipRef:m,popperPaneRef:G,input:v,tagWrapper:V,panel:b,suggestionPanel:D,popperVisible:M,inputHover:$,inputPlaceholder:Q,filtering:o,presentText:w,checkedValue:T,inputValue:H,searchInputValue:O,presentTags:U,allPresentTags:X,suggestions:j,isDisabled:A,isOnComposition:y,realSize:se,tagSize:me,multiple:ee,readonly:d,clearBtnVisible:I,nsCascader:s,nsInput:u,t:r,togglePopperVisible:P,hideSuggestionPanel:W,deleteTag:Te,focusFirstNode:$e,getCheckedNodes:lt,handleExpandChange:at,handleKeyDown:ot,handleComposition:nt,handleClear:it,handleSuggestionClick:rt,handleSuggestionKeyDown:dt,handleDelete:ut,handleInput:_e}}}),Ds={key:0},$s=["placeholder"],Ps=["onClick"];function Ls(e,t,l,n,s,u){const r=_("circle-close"),c=_("el-icon"),p=_("arrow-down"),m=_("el-input"),v=_("el-tag"),V=_("el-tooltip"),b=_("el-cascader-panel"),D=_("check"),M=_("el-scrollbar"),$=Dt("clickoutside");return f(),q(V,{ref:"tooltipRef",visible:e.popperVisible,teleported:e.teleported,"popper-class":[e.nsCascader.e("dropdown"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${e.nsCascader.namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:k(()=>[ge((f(),B("div",{class:L([e.nsCascader.b(),e.nsCascader.m(e.realSize),e.nsCascader.is("disabled",e.isDisabled),e.$attrs.class]),style:Lt(e.$attrs.style),onClick:t[11]||(t[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:t[12]||(t[12]=(...o)=>e.handleKeyDown&&e.handleKeyDown(...o)),onMouseenter:t[13]||(t[13]=o=>e.inputHover=!0),onMouseleave:t[14]||(t[14]=o=>e.inputHover=!1)},[E(m,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":t[1]||(t[1]=o=>e.inputValue=o),placeholder:e.searchInputValue?"":e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:L(e.nsCascader.is("focus",e.popperVisible)),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:t[2]||(t[2]=o=>e.$emit("focus",o)),onBlur:t[3]||(t[3]=o=>e.$emit("blur",o)),onInput:e.handleInput},{suffix:k(()=>[e.clearBtnVisible?(f(),q(c,{key:"clear",class:L([e.nsInput.e("icon"),"icon-circle-close"]),onClick:ce(e.handleClear,["stop"])},{default:k(()=>[E(r)]),_:1},8,["class","onClick"])):(f(),q(c,{key:"arrow-down",class:L([e.nsInput.e("icon"),"icon-arrow-down",e.nsCascader.is("reverse",e.popperVisible)]),onClick:t[0]||(t[0]=ce(o=>e.togglePopperVisible(),["stop"]))},{default:k(()=>[E(p)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(f(),B("div",{key:0,ref:"tagWrapper",class:L(e.nsCascader.e("tags"))},[(f(!0),B(re,null,pe(e.presentTags,o=>(f(),q(v,{key:o.key,type:e.tagType,size:e.tagSize,hit:o.hitState,closable:o.closable,"disable-transitions":"",onClose:H=>e.deleteTag(o)},{default:k(()=>[o.isCollapseTag===!1?(f(),B("span",Ds,R(o.text),1)):(f(),q(V,{key:1,teleported:!1,disabled:e.popperVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:k(()=>[S("span",null,R(o.text),1)]),content:k(()=>[S("div",{class:L(e.nsCascader.e("collapse-tags"))},[(f(!0),B(re,null,pe(e.allPresentTags.slice(1),(H,O)=>(f(),B("div",{key:O,class:L(e.nsCascader.e("collapse-tag"))},[(f(),q(v,{key:H.key,class:"in-tooltip",type:e.tagType,size:e.tagSize,hit:H.hitState,closable:H.closable,"disable-transitions":"",onClose:U=>e.deleteTag(H)},{default:k(()=>[S("span",null,R(H.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?ge((f(),B("input",{key:0,"onUpdate:modelValue":t[4]||(t[4]=o=>e.searchInputValue=o),type:"text",class:L(e.nsCascader.e("search-input")),placeholder:e.presentText?"":e.inputPlaceholder,onInput:t[5]||(t[5]=o=>e.handleInput(e.searchInputValue,o)),onClick:t[6]||(t[6]=ce(o=>e.togglePopperVisible(!0),["stop"])),onKeydown:t[7]||(t[7]=$t((...o)=>e.handleDelete&&e.handleDelete(...o),["delete"])),onCompositionstart:t[8]||(t[8]=(...o)=>e.handleComposition&&e.handleComposition(...o)),onCompositionupdate:t[9]||(t[9]=(...o)=>e.handleComposition&&e.handleComposition(...o)),onCompositionend:t[10]||(t[10]=(...o)=>e.handleComposition&&e.handleComposition(...o))},null,42,$s)),[[Pt,e.searchInputValue]]):Y("v-if",!0)],2)):Y("v-if",!0)],38)),[[$,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:k(()=>[ge(E(b,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":t[15]||(t[15]=o=>e.checkedValue=o),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:t[16]||(t[16]=o=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[He,!e.filtering]]),e.filterable?ge((f(),q(M,{key:0,ref:"suggestionPanel",tag:"ul",class:L(e.nsCascader.e("suggestion-panel")),"view-class":e.nsCascader.e("suggestion-list"),onKeydown:e.handleSuggestionKeyDown},{default:k(()=>[e.suggestions.length?(f(!0),B(re,{key:0},pe(e.suggestions,o=>(f(),B("li",{key:o.uid,class:L([e.nsCascader.e("suggestion-item"),e.nsCascader.is("checked",o.checked)]),tabindex:-1,onClick:H=>e.handleSuggestionClick(o)},[S("span",null,R(o.text),1),o.checked?(f(),q(c,{key:0},{default:k(()=>[E(D)]),_:1})):Y("v-if",!0)],10,Ps))),128)):_t(e.$slots,"empty",{key:1},()=>[S("li",{class:L(e.nsCascader.e("empty-text"))},R(e.t("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class","onKeydown"])),[[He,e.filtering]]):Y("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-options","transition","onHide"])}var ye=Ne(Ts,[["render",Ls],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/index.vue"]]);ye.install=e=>{e.component(ye.name,ye)};const _s=ye,Ms=_s;const Hs={data(){return{photoHide:!1,pageTitle:"\u8F6E\u64AD\u56FE\u53D1\u5E03",uploadLoading:!1,id:"",title:"",articleId:"",time:"",summary:"",carousel:[[],[],[],[]],dialogVisible:!1,dialogImageUrl:"",fileList:[],imageId:0,ArticleSelectionBox:[],bind:null}},mounted(){this.dateShow()},created(){window.addEventListener("beforeunload",e=>this.beforeunloadFn(e)),this.dateFormat(),this.getCarousel(),this.setInitData(),es().then(e=>{for(let t=0;t<e.result.length;t++){let l={value:e.result[t].id,label:e.result[t].title};console.log(l),this.ArticleSelectionBox.push(l)}})},beforeDestroy(){window.removeEventListener("beforeunload",e=>this.beforeunloadFn(e)),this.dataDestroy()},beforeRouteLeave(e,t,l){this.id||localStorage.setItem("carouselPublishData",JSON.stringify(this.$data)),l()},watch:{$route(){this.setInitData(),this.getCarousel()}},methods:{beforeunloadFn(){this.id||localStorage.setItem("carouselPublishData",JSON.stringify(this.$data))},setInitData(){if(console.log(this.$route.query),this.$route.query.id)this.id=parseInt(this.$route.query.id)||"",this.imageId=this.$route.query.imageId||0,this.articleId=this.$route.query.articleId||"",this.summary=this.$route.query.summary||"",this.title=this.$route.query.title||"",this.pageTitle=parseInt(this.$route.query.id)?"\u8F6E\u64AD\u56FE\u7F16\u8F91":"\u8F6E\u64AD\u56FE\u53D1\u5E03";else{const e=localStorage.getItem("carouselPublishData");e&&(Object.assign(this.$data,JSON.parse(e)),localStorage.removeItem("carouselPublishData"))}},confirm(){if(!this.title){Z.warning("\u8BF7\u8F93\u5165\u8F6E\u64AD\u56FE\u6807\u9898");return}if(!this.articleId){Z.warning("\u8BF7\u8F93\u5165\u8F6E\u64AD\u56FE\u5173\u8054\u7684\u6587\u7AE0ID");return}if(!this.id){Z.warning("\u8BF7\u8F93\u5165\u8F6E\u64AD\u56FE\u4F4D\u7F6E");return}if(!this.summary){Z.warning("\u8BF7\u8F93\u5165\u8F6E\u64AD\u56FE\u6458\u8981");return}if(this.fileList.length===0&&this.imageId===0){Z.warning("\u8BF7\u6DFB\u52A0\u4E3B\u56FE");return}if(this.uploadLoading=!0,this.imageId===0){let e=new FormData;e.append("img",this.fileList[0].raw),ts(e).then(({code:t,message:l,result:n})=>{t===0?(this.imageId=n,this.photoHide=!1,this.updateCarousel(!0)):(Z.error(l),this.uploadLoading=!1)}).catch(()=>{Z.error("\u53D1\u5E03\u5931\u8D25"),this.uploadLoading=!1})}else this.updateCarousel(!1)},updateCarousel(e){Fe({id:this.id,articleId:parseInt(this.articleId),title:this.title,imageId:this.imageId,summary:this.summary,createDate:this.time}).then(({code:t,message:l})=>{t===0?parseInt(this.$route.query.id)&&parseInt(this.$route.query.id)!==this.id?Fe({id:parseInt(this.$route.query.id),articleId:parseInt(this.carousel[this.id-1].articleId),title:this.carousel[this.id-1].title,imageId:this.carousel[this.id-1].imageId,summary:this.carousel[this.id-1].summary,createDate:this.carousel[this.id-1].createDate}).then(()=>{this.empty(),this.getCarousel(),this.uploadLoading=!1,e?Z.success("\u4E0A\u4F20\u6210\u529F"):(Z.success("\u7F16\u8F91\u6210\u529F"),this.$router.push("/home/carouselManage"))}):(this.empty(),this.getCarousel(),this.uploadLoading=!1,e?Z.success("\u4E0A\u4F20\u6210\u529F"):(Z.success("\u7F16\u8F91\u6210\u529F"),this.$router.push("/home/carouselManage"))):(Z.error(l),this.uploadLoading=!1)})},empty(){this.id="",this.title="",this.articleId="",this.summary="",this.fileList=[],this.imageId=0,localStorage.removeItem("carouselPublishData")},fileChange(e,t){this.fileList=[e],this.photoHide=!0},fileRemove(){this.photoHide=!1},handleRemove(e,t){console.log(e,t)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},getCarousel(){ss().then(({code:e,result:t})=>{e===0&&(this.carousel=t,this.carousel.sort((l,n)=>l.id-n.id))})},dataDestroy(){this.timer&&clearInterval(this.timer)},dateShow(){this.timer=setInterval(()=>{this.dateFormat()},1e3)},dateFormat(){let e=new Date,t=e.getFullYear(),l=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate(),s=e.getHours()<10?"0"+e.getHours():e.getHours(),u=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),r=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();this.time=t+"-"+l+"-"+n+" "+s+":"+u+":"+r}}},oe=e=>(Ht("data-v-e0492392"),e=e(),zt(),e),zs={class:"carouselPublish"},As={class:"title"},Fs={class:"flexLine"},Bs=oe(()=>S("p",{class:"tagText"},"\u6807\u9898\uFF1A",-1)),qs={class:"flexLine"},Os=oe(()=>S("p",{class:"tagText"},"\u5173\u8054\u6587\u7AE0\uFF1A",-1)),Us={class:"tagText"},Ks={class:"flexLine"},Rs=oe(()=>S("p",{class:"tagText"},"\u53D1\u5E03\u65E5\u671F\uFF1A",-1)),Ws={class:"tagText"},js={class:"flexLine"},Zs=oe(()=>S("p",{class:"tagText"},"\u8F6E\u64AD\u56FE\u4F4D\u7F6E\uFF1A",-1)),Gs={class:"flexRow"},Js=oe(()=>S("p",{class:"tagText"},"\u6458\u8981\uFF1A",-1)),Ys={class:"flexLine alignTop"},Xs=oe(()=>S("p",{class:"tagText"},"\u6DFB\u52A0\u4E3B\u56FE\uFF1A",-1)),Qs=oe(()=>S("p",{class:"tagText marginLeft"},"\uFF08\u5EFA\u8BAE\u6BD4\u4F8B\u4E3A4:3\uFF0C\u5C3A\u5BF8\u5927\u4E8E1600*1200\uFF09",-1)),xs={class:"actionBar"},el=["src"];function tl(e,t,l,n,s,u){const r=Xe,c=Ms,p=Ye,m=qt,v=_("Plus"),V=we,b=Ot,D=At,M=Ft;return f(),B("div",zs,[S("p",As,R(s.pageTitle),1),S("div",Fs,[Bs,E(r,{class:"flexGrow",modelValue:s.title,"onUpdate:modelValue":t[0]||(t[0]=$=>s.title=$),maxlength:"50",placeholder:"\u8BF7\u8F93\u5165\u8F6E\u64AD\u56FE\u6807\u9898","show-word-limit":"",type:"text"},null,8,["modelValue"])]),S("div",qs,[Os,E(c,{placeholder:"\u8BF7\u8F93\u5165\u8F6E\u64AD\u56FE\u5173\u8054\u7684\u6587\u7AE0\u6807\u9898",options:s.ArticleSelectionBox,filterable:"",modelValue:s.articleId,"onUpdate:modelValue":t[1]||(t[1]=$=>s.articleId=$)},null,8,["options","modelValue"]),S("p",Us,"ID\uFF1A"+R(s.articleId),1)]),S("div",Ks,[Rs,S("p",Ws,R(s.time),1)]),S("div",js,[Zs,E(m,{modelValue:s.id,"onUpdate:modelValue":t[2]||(t[2]=$=>s.id=$)},{default:k(()=>[E(p,{label:1},{default:k(()=>[ae("\u7B2C\u4E00\u5F20\uFF08"+R(!s.carousel[0].title||s.carousel[0].title==="0"?"\u7A7A":s.carousel[0].title)+"\uFF09",1)]),_:1}),E(p,{label:2},{default:k(()=>[ae("\u7B2C\u4E8C\u5F20\uFF08"+R(!s.carousel[1].title||s.carousel[1].title==="0"?"\u7A7A":s.carousel[1].title)+"\uFF09",1)]),_:1}),E(p,{label:3},{default:k(()=>[ae("\u7B2C\u4E09\u5F20\uFF08"+R(!s.carousel[2].title||s.carousel[2].title==="0"?"\u7A7A":s.carousel[2].title)+"\uFF09",1)]),_:1}),E(p,{label:4},{default:k(()=>[ae("\u7B2C\u56DB\u5F20\uFF08"+R(!s.carousel[3].title||s.carousel[3].title==="0"?"\u7A7A":s.carousel[3].title)+"\uFF09",1)]),_:1})]),_:1},8,["modelValue"])]),S("div",Gs,[Js,E(r,{class:"rowTextarea",modelValue:s.summary,"onUpdate:modelValue":t[3]||(t[3]=$=>s.summary=$),placeholder:"\u8BF7\u8F93\u5165\u8F6E\u64AD\u56FE\u6458\u8981",maxlength:"100","show-word-limit":"",autosize:{minRows:2,maxRows:6},type:"textarea",resize:"none"},null,8,["modelValue"])]),S("div",Ys,[Xs,E(b,{class:L({"hide-upload-btn":s.photoHide}),limit:1,"file-list":s.fileList,accept:"image/*","auto-upload":!1,"list-type":"picture-card","on-preview":u.handlePictureCardPreview,"on-change":u.fileChange,"on-remove":u.fileRemove},{default:k(()=>[E(V,null,{default:k(()=>[E(v)]),_:1})]),_:1},8,["class","file-list","on-preview","on-change","on-remove"]),Qs]),S("div",xs,[E(D,{class:"confirmBtn margin50",onClick:u.confirm,loading:s.uploadLoading},{default:k(()=>[ae("\u53D1\u5E03")]),_:1},8,["onClick","loading"]),E(D,{class:"cancelBtn margin50",onClick:u.empty,disabled:s.uploadLoading},{default:k(()=>[ae("\u6E05\u7A7A")]),_:1},8,["onClick","disabled"])]),E(M,{modelValue:s.dialogVisible,"onUpdate:modelValue":t[4]||(t[4]=$=>s.dialogVisible=$)},{default:k(()=>[S("img",{"w-full":"",src:s.dialogImageUrl,alt:"Preview Image"},null,8,el)]),_:1},8,["modelValue"])])}var rl=Mt(Hs,[["render",tl],["__scopeId","data-v-e0492392"]]);export{rl as default};
